import{d as L,r as _,j as O,h as w,b as P,c as u,e as T,k as m,g as e,w as l,F as W,o as j,f as s,E as q,l as A}from"./index-78dbfbb3.js";const M={class:"common-layout"},S=m("h1",{class:"text-3xl font-bold underline text-center my-3"},"Beer",-1),z=["src"],G={class:"flex"},H={class:"dialog-footer"},J=m("span",null," It should be noted that the content will not be aligned in center by default ",-1),K={class:"dialog-footer"},f="100px",X=L({__name:"Beer",setup(Q){const h=_(!0),V=_([]);O(async()=>{const{data:d}=await w.get("http://localhost:8888/beer/query");V.value=d,h.value=!1});const v=_(!1),n=P({id:NaN,name:"",tagline:"",first_brewed:"",description:"",image_url:"",abv:NaN,ibu:NaN,target_fg:NaN,target_og:NaN,ebc:NaN,srm:NaN,ph:NaN,attenuation_level:NaN,volume:{unit:"",value:""},boil_volume:{unit:"",value:""}}),C=async d=>{const t=q.service({fullscreen:!0,background:"#000a"}),{data:g}=await w.post("http://localhost:8888/beer/update",d),i=V.value.indexOf(d);V.value[i]=g,t.close(),v.value=!1,A({title:"Update Success",message:`${d.name} was updated`,type:"success"})},b=_(!1),N=_(),y=_(),U=async d=>{b.value=!0;const t=new Promise((i,a)=>{N.value=i,y.value=a}).then(i=>({trigger:i,result:!0})).catch(i=>(console.error(i),{reason:i,result:!1})),{result:g}=await t;if(g){const{data:i}=await w.post(`http://localhost:8888/beer/delete/${d}`);console.log(i)}};return(d,t)=>{const g=u("el-header"),i=u("el-skeleton-item"),a=u("el-table-column"),r=u("el-button"),B=u("el-table"),$=u("el-skeleton"),D=u("el-main"),E=u("el-container"),p=u("el-input"),c=u("el-form-item"),k=u("el-divider"),I=u("el-form"),x=u("el-dialog");return j(),T(W,null,[m("div",M,[e(E,null,{default:l(()=>[e(g,null,{default:l(()=>[S]),_:1}),e(D,null,{default:l(()=>[e($,{style:{width:"100%"},loading:h.value,animated:""},{template:l(()=>[e(i,{variant:"rect",style:{width:"920px",height:"680px"}})]),default:l(()=>[e(B,{data:V.value,style:{width:"100%"},height:"680"},{default:l(()=>[e(a,{fixed:"",prop:"name",label:"Name",width:"120"}),e(a,{prop:"first_brewed",label:"First Brewed",width:"120"}),e(a,{label:"Image",width:"110"},{default:l(({row:o})=>[m("img",{src:o.image_url},null,8,z)]),_:1}),e(a,{prop:"attenuation_level",label:"Attenuation Level",width:"110"}),e(a,{label:"Info"},{default:l(()=>[e(a,{label:"Boil Volume"},{default:l(()=>[e(a,{prop:"boil_volume.unit",label:"Unit",width:"70"}),e(a,{prop:"boil_volume.value",label:"Value",width:"70"})]),_:1}),e(a,{label:"Volume"},{default:l(()=>[e(a,{prop:"volume.unit",label:"Unit",width:"70"}),e(a,{prop:"volume.value",label:"Value",width:"70"})]),_:1}),e(a,{prop:"description",label:"Description",width:"300"}),e(a,{prop:"tagline",label:"Tagline",width:"120"}),e(a,{label:"Operations",width:"180"},{default:l(({row:o})=>[m("div",G,[e(r,{type:"warning",onClick:F=>(n=o,v.value=!0)},{default:l(()=>[s(" Edit ")]),_:2},1032,["onClick"]),e(r,{type:"danger",onClick:F=>U(o.id)},{default:l(()=>[s("Delete")]),_:2},1032,["onClick"])])]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["loading"])]),_:1})]),_:1})]),e(x,{modelValue:v.value,"onUpdate:modelValue":t[8]||(t[8]=o=>v.value=o),title:"Beer Info",draggable:"","align-center":""},{footer:l(()=>[m("span",H,[e(r,{onClick:t[6]||(t[6]=o=>v.value=!1)},{default:l(()=>[s("Cancel")]),_:1}),e(r,{type:"primary",onClick:t[7]||(t[7]=o=>C(n))},{default:l(()=>[s("Update")]),_:1})])]),default:l(()=>[e(I,{model:n},{default:l(()=>[e(c,{label:"Name","label-width":f},{default:l(()=>[e(p,{modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=o=>n.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(c,{label:"Description","label-width":f},{default:l(()=>[e(p,{modelValue:n.description,"onUpdate:modelValue":t[1]||(t[1]=o=>n.description=o),autocomplete:"off",type:"textarea",rows:"6"},null,8,["modelValue"])]),_:1}),e(k,{"content-position":"left"},{default:l(()=>[s("Volume")]),_:1}),e(c,{label:"Unit","label-width":f},{default:l(()=>[e(p,{modelValue:n.boil_volume.unit,"onUpdate:modelValue":t[2]||(t[2]=o=>n.boil_volume.unit=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(c,{label:"Value","label-width":f},{default:l(()=>[e(p,{modelValue:n.boil_volume.value,"onUpdate:modelValue":t[3]||(t[3]=o=>n.boil_volume.value=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(k,{"content-position":"left"},{default:l(()=>[s("Boil Volume")]),_:1}),e(c,{label:"Unit","label-width":f},{default:l(()=>[e(p,{modelValue:n.volume.unit,"onUpdate:modelValue":t[4]||(t[4]=o=>n.volume.unit=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(c,{label:"Value","label-width":f},{default:l(()=>[e(p,{modelValue:n.volume.value,"onUpdate:modelValue":t[5]||(t[5]=o=>n.volume.value=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(x,{modelValue:b.value,"onUpdate:modelValue":t[11]||(t[11]=o=>b.value=o),title:"Warning",width:"30%","align-center":""},{footer:l(()=>[m("span",K,[e(r,{onClick:t[9]||(t[9]=o=>(y.value("user cancel"),b.value=!1))},{default:l(()=>[s("Cancel")]),_:1}),e(r,{type:"primary",onClick:t[10]||(t[10]=o=>(N.value("user confirm"),b.value=!1))},{default:l(()=>[s("Confirm")]),_:1})])]),default:l(()=>[J]),_:1},8,["modelValue"])],64)}}});export{X as default};
